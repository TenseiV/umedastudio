---
import Layout from '../layouts/Layout.astro';
// Imports supprimés du frontmatter et déplacés dans les scripts

// --- Importer les logos depuis src/assets/img ---
import { Image } from 'astro:assets';
import phpLogo from '../assets/img/php.svg';
import laravelLogo from '../assets/img/laravel.svg';
import symfonyLogo from '../assets/img/symfony.svg';
import jsLogo from '../assets/img/js.svg';
import wordpressLogo from '../assets/img/wordpress.svg';
// import astroLogo from '../assets/img/astro.svg'; // Commenté car fichier manquant

import stoptcaImage1 from '../assets/img/stoptca.webp';
import stoptcaImage2 from '../assets/img/stoptca2.webp';
import evenparcImage1 from '../assets/img/evenparc.webp';
import evenparcImage2 from '../assets/img/evenparc2.webp';
import maisonicImage1 from '../assets/img/maisonic.webp';
import maisonicImage2 from '../assets/img/maisonic2.webp';
import maisonicImage3 from '../assets/img/maisonic3.png';
import albeaImage1 from '../assets/img/albea.png';
import upgradeImage1 from '../assets/img/upgrade1.png';
import upgradeImage2 from '../assets/img/upgrade2.png';
import projectPlaceholder from '../assets/img/project-placeholder.svg';

// Project Data (Remove typing)
const projects = [
  {
    id: 'upgradegg',
    title: 'Upgrade.gg - Plateforme Gaming & E-sport',
    description: 'Plateforme de mise en relation coach/élèves dans le domaine du gaming et de l\'esport...',
    detailedDescription: 'Développement d\'une plateforme complète de mise en relation entre coachs et élèves dans le domaine du gaming et de l\'esport. Système de réservation de sessions de coaching, gestion des profils utilisateurs, système de paiement intégré et tableau de bord pour les coachs et étudiants.',
    images: [upgradeImage1, upgradeImage2],
    tags: ['PHP', 'Laravel', 'JavaScript', 'MySQL', 'Gaming', 'E-sport'],
    details: 'Secteur Gaming/E-sport | En développement',
    link: ''
  },
  {
    id: 'albea',
    title: 'Albea Cosmetics & Fragrance - Développements PHP Laravel',
    description: 'Maintenance sur un outil existant de gestions d\'équipes et de machines en PHP - Bootstrap 4...',
    detailedDescription: 'Maintenance sur un outil existant de gestions d\'équipes et de machines en PHP - Bootstrap 4. Conception et développement d\'une nouvelle application en PHP Laravel pour un meilleur suivis des consignes d\'équipe sur les machines et les moules de la journée.',
    images: [albeaImage1],
    tags: ['PHP', 'Laravel 11', 'PHP8', 'MySQL', 'Bootstrap'],
    details: 'Secteur Chimie | Décembre 2023 - Aujourd\'hui',
    link: ''
  },
  {
    id: 'upyourbizz',
    title: 'UpYourbizz - Développements PHP Symfony sur ERP Interne',
    description: 'Développements PHP Symfony sur un outil interne de type ERP pour le secteur automobile...',
    detailedDescription: 'Développements PHP Symfony sur un outil interne de type ERP. Mise en place et maintenance d\'API REST. Développement de nouvelles fonctionnalités et documentation technique. Optimisation des performances et de la sécurité de l\'application.',
    images: [projectPlaceholder],
    tags: ['PHP', 'Symfony', 'API Rest', 'ERP', 'Automobile'],
    details: 'Secteur Automobile | Décembre 2023 - Présent',
    link: 'https://upyourbizz.com'
  },
  {
    id: 'stoptca',
    title: 'StopTCA.fr - Plateforme médicale pour les TCA',
    description: 'Refonte complète du système de paiement pour une plateforme médicale...',
    detailedDescription: 'Migration de l\'ancien système de paiement vers une solution moderne utilisant Stripe via MangoPay. Développement d\'une API sécurisée en Laravel pour gérer les transactions, les abonnements et les remboursements. Création d\'un dashboard administrateur pour le suivi financier. Améliorations de l\'UX/UI du tunnel de paiement en Javascript et CSS.',
    images: [stoptcaImage1, stoptcaImage2], 
    tags: ['PHP', 'Laravel', 'MangoPay', 'JavaScript', 'CSS', 'HTML'],
    details: 'Secteur Médical | Juin 2022 - Mai 2023',
    link: 'https://stoptca.fr'
  },
  {
    id: 'evenparc',
    title: 'EvenParc - Vente de véhicules d\'occasion',
    description: 'Développement d\'une application web de gestion et vente de véhicules d\'occasion...',
    detailedDescription: 'Développement d\'une application web de gestion et vente de véhicules d\'occasion. Intégration de fonctionnalités spécifiques via des plugins sur mesure (configurateur de produit, etc.). Optimisation SEO technique et de contenu pour améliorer le classement et les ventes.',
    images: [evenparcImage1, evenparcImage2],
    tags: ['PHP', 'Symfony', 'API Rest', 'JavaScript', 'Bootstrap'],
    details: 'Secteur Automobile | 2020',
    link: 'https://www.evenparcautomobiles.com/'
  },
  {
    id: 'maisonic',
    title: 'Maisonic - Site E-commerce Domotique',
    description: 'Maintenance et développement d\'un site e-commerce sous Symfony et CMS Thélia',
    detailedDescription: 'Maintenance et développement d\'un site e-commerce sous Symfony et CMS Thélia. Développement de nouvelles fonctionnalités et intégration de nouveaux modules. Optimisation SEO et performance du site.',
    images: [maisonicImage1, maisonicImage2, maisonicImage3],
    tags: ['PHP', 'Symfony', 'CMS Thélia', 'JavaScript', 'CSS', 'HTML'],
    details: 'Secteur Domotique | 2024',
    link: 'https://maisonic.com'
  },
  // Add more projects here...
];

// Préparer les projets pour le transfert au JavaScript client
const preparedProjects = projects.map(project => ({
  ...project,
  // Convertir les objets Image d'Astro en chemins d'URL pour le JavaScript
  images: project.images.map(img => typeof img === 'string' ? img : img.src)
}));

// Remove type annotation
const imageWidths = [400, 800];

---

<Layout title="Umeda Studio - Développement Web sur mesure">
	<main data-projects={JSON.stringify(preparedProjects)}>
		<section class="hero">
      <div id="particles-js"></div>
			<div class="hero-content">
        <h1>Umeda Studio</h1>
        <p class="tagline">Développements Web sur mesure</p>
        <div class="hero-cta">
          <a href="#services" class="cta-button"><i class="fa-solid fa-code"></i> Services</a>
          <a href="#offres" class="cta-button secondary"><i class="fa-solid fa-tags"></i> Offres</a>
        </div>

        {/* --- Section Logos Technologies --- */} 
        <div class="tech-logos">
          <div class="logo-scroll-wrapper">
            <div class="logo-list">
              {/* Logo Set 1 - Utiliser .src */} 
              <img src={phpLogo.src} alt="PHP" class="tech-logo" />
              <img src={laravelLogo.src} alt="Laravel" class="tech-logo" />
              <img src={symfonyLogo.src} alt="Symfony" class="tech-logo" />
              <img src={jsLogo.src} alt="JavaScript" class="tech-logo" />
              <img src={wordpressLogo.src} alt="WordPress" class="tech-logo" />
              {/* <img src={astroLogo.src} alt="Astro" class="tech-logo" /> */} {/* Commenté */} 
              {/* Logo Set 2 (Duplicate) - Utiliser .src */} 
              <img src={phpLogo.src} alt="PHP" class="tech-logo" />
              <img src={laravelLogo.src} alt="Laravel" class="tech-logo" />
              <img src={symfonyLogo.src} alt="Symfony" class="tech-logo" />
              <img src={jsLogo.src} alt="JavaScript" class="tech-logo" />
              <img src={wordpressLogo.src} alt="WordPress" class="tech-logo" />
              {/* <img src={astroLogo.src} alt="Astro" class="tech-logo" /> */} {/* Commenté */} 
            </div>
          </div>
        </div>
        {/* --- Fin Section Logos Technologies --- */} 

      </div>
		</section>

    <section id="services" class="services-section">
      <h2>Services</h2>
      <div class="services-grid">
        <div class="service-card">
          <h3>Développement Web FullStack PHP</h3>
          <p>Applications web robustes et sur mesure avec Laravel ou Symfony. Expertise back-end et intégration complète.</p>
        </div>
        <div class="service-card">
          <h3>Création Sites Vitrines & E-commerce</h3>
          <p>Solutions clé en main avec WordPress : design personnalisé, fonctionnalités e-commerce (WooCommerce), optimisation SEO.</p>
        </div>
        <div class="service-card">
          <h3>Design & Intégration Front-End</h3>
          <p>Interfaces utilisateur modernes, intuitives et créatives. Maîtrise de Javascript et des dernières tendances du web design.</p>
        </div>
      </div>
    </section>

    <section id="projets" class="portfolio-section">
      <h2>Projets</h2>
      <div class="portfolio-grid">
        {projects.map((project, index) => (
          <div class="project-card" data-index={index} onclick={`openProjectModal('${project.id}')`}>
            {/* --- Swiper Carousel --- */} 
            <div class={`swiper project-swiper-${project.id}`}>
              <div class="swiper-wrapper">
                {project.images.map((img, imgIndex) => (
                  <div class="swiper-slide">
                    <Image 
                      src={img}
                      alt={`${project.title} - Screenshot ${imgIndex + 1}`}
                      class="project-image"
                      widths={imageWidths}
                      sizes="(max-width: 600px) 400px, 800px"
                      format="webp"
                      quality={80}
                    />
                  </div>
                ))}
              </div>
              {/* Add Pagination */} 
              <div class="swiper-pagination"></div>
              {/* Add Navigation */} 
              <div class="swiper-button-prev"></div>
              <div class="swiper-button-next"></div>
            </div>

            {/* --- Project Content --- */} 
            <div class="project-content">
              <h3>{project.title}</h3>
              <p class="project-description">{project.description}</p>
              <div class="project-tags">
                {project.tags.map(tag => (
                  <span class={`tag ${tag.toLowerCase().replace(/[^a-z0-9]/g, '')}`}>{tag}</span>
                ))}
              </div>
              {project.details && <p class="project-details">{project.details}</p>}
              {project.link && <a href={project.link} target="_blank" rel="noopener noreferrer" class="project-link cta-button secondary"><i class="fa-solid fa-eye"></i> Voir</a>}
            </div>
          </div>
        ))}
      </div>
    </section>

    <section id="testimonials" class="testimonials-section">
      <h2>Témoignages</h2>
      <div class="testimonials-grid">
        <div class="testimonial-card">
          <div class="rating">
            <span class="star">★</span>
            <span class="star">★</span>
            <span class="star">★</span>
            <span class="star">★</span>
            <span class="star">★</span>
          </div>
          <p class="quote">"Un nouveau projet avec Sébastien et comme d'habitude je suis complètement satisfait du résultat. À l'avenir je n'hésiterais pas à lui confier d'autres projets. Je vous le recommande très fortement."</p>
          <div class="author">
            <div>
              <p class="name">Pierre Kossa</p>
              <p class="title">Client fidèle, France</p>
            </div>
          </div>
        </div>
        <div class="testimonial-card">
          <div class="rating">
            <span class="star">★</span>
            <span class="star">★</span>
            <span class="star">★</span>
            <span class="star">★</span>
            <span class="star">★</span>
          </div>
          <p class="quote">"Excellent travail de Sébastien sur une application Intranet complexe."</p>
          <div class="author">
            <div>
              <p class="name">Eric</p>
              <p class="title">Albea Cosmetics & Fragrance</p>
            </div>
          </div>
        </div>
        <div class="testimonial-card">
          <div class="rating">
            <span class="star">★</span>
            <span class="star">★</span>
            <span class="star">★</span>
            <span class="star">★</span>
            <span class="star">★</span>
          </div>
          <p class="quote">"Cela fait un mois que je travaille avec Sébastien. Pour le moment je suis plus que satisfaite. Sebastien est une personne de confiance et très compétente. Pour lui un problème = une solution."</p>
          <div class="author">
            <div>
              <p class="name">Céline</p>
              <p class="title">StopTCA.fr</p>
            </div>
          </div>
        </div>
      </div>
    </section>

    <section id="offres" class="pricing-section">
      <h2>Des offres Adaptées à Vos Besoins</h2>
      <div class="pricing-grid">
        <div class="pricing-card">
          <h3>Basic</h3>
          <p class="price"><span class="price-prefix">à partir de</span> 499€</p>
          <ul>
            <li>Site vitrine simple (jusqu'à 5 pages)</li>
            <li>Design moderne et responsive</li>
            <li>Formulaire de contact</li>
            <li>Mise en ligne</li>
          </ul>
          <button type="button" class="cta-button" onclick="selectPlan('Basic')"><i class="fa-solid fa-check"></i> Choisir</button>
        </div>
        <div class="pricing-card featured">
          <h3>Starter</h3>
          <p class="price"><span class="price-prefix">à partir de</span> 999€</p>
          <ul>
            <li>Site vitrine/blog avancé</li>
            <li>Design personnalisé & unique</li>
            <li>Intégration CMS (WordPress)</li>
            <li>Début fonctionnalités e-commerce</li>
            <li>Optimisation SEO initiale</li>
          </ul>
          <button type="button" class="cta-button" onclick="selectPlan('Starter')"><i class="fa-solid fa-check"></i> Choisir</button>
        </div>
        <div class="pricing-card">
          <h3>Pro</h3>
          <p class="price"><span class="price-prefix">à partir de</span> 1799€</p>
          <ul>
            <li>Boutique en ligne complète</li>
            <li>Catalogue produits illimité</li>
            <li>Paiement sécurisé intégré</li>
            <li>Fonctionnalités e-commerce avancées</li>
            <li>Support & Maintenance (option)</li>
          </ul>
          <button type="button" class="cta-button" onclick="selectPlan('Pro')"><i class="fa-solid fa-check"></i> Choisir</button>
        </div>
      </div>
    </section>

    <section id="contact" class="contact-section">
      <h2>Contactez-moi</h2>
      <p>Discutons de votre projet ! Sélectionnez une offre ci-dessus ou remplissez le formulaire pour une demande personnalisée.</p>
      <form action="https://formspree.io/f/mkgropyl" method="POST" class="contact-form">
        <input type="hidden" id="selected-plan" name="selected_plan" value="Aucun">
        <div id="plan-options" class="plan-options-section" style="display: none;">
          <h4>Votre sélection : <span id="selected-plan-display"></span></h4>
          <p>Options supplémentaires (optionnel) :</p>
          <div id="options-checkboxes" class="options-checkboxes">
          </div>
          <hr class="options-divider">
        </div>
        <div class="form-group">
          <label for="name">Nom :</label>
          <input type="text" id="name" name="name" required>
        </div>
        <div class="form-group">
          <label for="email">Email :</label>
          <input type="email" id="email" name="email" required>
        </div>
        <div class="form-group">
          <label for="subject">Sujet :</label>
          <input type="text" id="subject" name="subject" value="Demande de renseignements">
        </div>
        <div class="form-group">
          <label for="message">Message :</label>
          <textarea id="message" name="message" rows="5" required placeholder="Décrivez votre projet ou posez vos questions ici..."></textarea>
        </div>
        <button type="submit" class="cta-button"><i class="fa-solid fa-paper-plane"></i> Envoyer</button>
      </form>
    </section>

    {/* === Project Modal Structure (Initially Hidden) === */} 
    <div id="project-modal" class="modal-overlay">
      <div class="modal-content">
        <button class="modal-close-button">×</button>
        <h3 id="modal-project-title"></h3>
        
        {/* Modal Swiper for larger images */} 
        <div id="modal-swiper-container" class="swiper modal-swiper">
          <div class="swiper-wrapper" id="modal-swiper-wrapper">
            {/* Slides will be populated by JS */} 
          </div>
          <div class="swiper-pagination modal-swiper-pagination"></div>
          <div class="swiper-button-prev modal-swiper-button-prev"></div>
          <div class="swiper-button-next modal-swiper-button-next"></div>
        </div>

        <div class="modal-project-info">
          <div class="modal-project-meta">
            <div class="modal-project-type">
              <span class="info-label">Type</span>
              <span id="modal-project-type" class="info-value"></span>
            </div>
            <div class="modal-project-sector">
              <span class="info-label">Secteur</span>
              <span id="modal-project-sector" class="info-value"></span>
            </div>
            <div class="modal-project-date">
              <span class="info-label">Période</span>
              <span id="modal-project-date" class="info-value"></span>
            </div>
          </div>
          
          <div class="modal-project-details">
            <h4>Description</h4>
            <p id="modal-project-description"></p>
          </div>
          
          <div class="modal-project-technologies">
            <h4>Technologies utilisées</h4>
            <div id="modal-project-tags" class="modal-tags"></div>
          </div>
          
          <div id="modal-project-link-container" class="modal-project-link">
            <a id="modal-project-link" href="#" target="_blank" rel="noopener noreferrer" class="cta-button"><i class="fa-solid fa-globe"></i> Voir le site</a>
          </div>
        </div>
      </div>
    </div>
    {/* === End Project Modal Structure === */} 

	</main>
</Layout>

<!-- Importation des bibliothèques via CDN -->
<!-- Chargement de tsParticles avec la version stable du bundle complet -->
<script is:inline src="https://cdn.jsdelivr.net/npm/tsparticles@1.42.4/tsparticles.min.js"></script>

<!-- Chargement de Swiper via CDN -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />
<script is:inline src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>

<!-- Script d'initialisation des particules (ancienne version plus stable) -->
<script is:inline>
  document.addEventListener('DOMContentLoaded', () => {
    console.log("DOM loaded, initializing particles");
    const particlesContainer = document.getElementById('particles-js');
    console.log("Particles container:", particlesContainer);
    
    if (particlesContainer) {
      if (typeof tsParticles !== 'undefined') {
        console.log("tsParticles found:", typeof tsParticles);
        try {
          // Utiliser la version 1.x qui a une API différente
          tsParticles.load('particles-js', {
            particles: {
              number: {
                value: 80,
                density: {
                  enable: true,
                  value_area: 800
                }
              },
              color: {
                value: "#ffffff"
              },
              shape: {
                type: "circle"
              },
              opacity: {
                value: 0.5,
                random: true
              },
              size: {
                value: 2,
                random: true
              },
              move: {
                enable: true,
                speed: 1.5,
                direction: "none",
                random: true,
                straight: false,
                out_mode: "out",
                bounce: false
              }
            },
            interactivity: {
              detect_on: "canvas",
              events: {
                onhover: { enable: false },
                onclick: { enable: false },
                resize: true
              }
            },
            retina_detect: true
          });
          console.log("Particles initialized successfully");
        } catch(error) {
          console.error('Error initializing tsParticles:', error);
        }
      } else {
        console.error("tsParticles library not loaded");
      }
    } else {
      console.error("Particles container not found");
    }
  });
</script>

<!-- Script pour les autres fonctionnalités -->
<script is:inline>
  // Code logo-scroller.js
  function initLogoScroller() {
    const logoWrapper = document.querySelector('.logo-scroll-wrapper');
    const logoList = document.querySelector('.logo-list');

    if (logoWrapper && logoList) {
        const originalLogos = Array.from(logoList.children);
        if (originalLogos.length === 0) return; // Exit if no logos

        const singleSetWidth = logoList.scrollWidth;
        const containerWidth = logoWrapper.offsetWidth;

        // Duplicate logos if needed
        if (singleSetWidth > 0 && containerWidth > 0) {
            while (logoList.scrollWidth < containerWidth * 2) {
                originalLogos.forEach(logo => {
                    logoList.appendChild(logo.cloneNode(true));
                });
            }
        }
        // Check again if duplication resulted in enough width
        if (logoList.scrollWidth <= containerWidth) {
            console.warn("Logo list not wide enough for infinite scroll effect.");
            return; // Exit if still not wide enough
        }

        let currentTranslate = 0;
        const scrollSpeed = 0.3;
        let animationFrameId = null;

        const animateScroll = () => {
            currentTranslate -= scrollSpeed;
            if (Math.abs(currentTranslate) >= singleSetWidth) {
                currentTranslate += singleSetWidth;
            }
            logoList.style.transform = `translateX(${currentTranslate}px)`;
            animationFrameId = requestAnimationFrame(animateScroll);
        };

        // Start the animation
        animateScroll();

        // Optional: Pause on hover
        logoWrapper.addEventListener('mouseenter', () => {
            if (animationFrameId) {
                cancelAnimationFrame(animationFrameId);
                animationFrameId = null;
            }
        });
        logoWrapper.addEventListener('mouseleave', () => {
            if (!animationFrameId) {
                animateScroll(); // Resume animation
            }
        });
    }
  }

  // Code card-swipers.js
  function initCardSwipers() {
    const swiperContainers = document.querySelectorAll('.swiper[class*="project-swiper-"]'); 
    
    if (swiperContainers.length > 0) {
        swiperContainers.forEach(container => {
            new Swiper(container, { 
                loop: true, // Consider if loop is needed if only 2 images
                slidesPerView: 1,
                spaceBetween: 0, 
                pagination: {
                    el: container.querySelector('.swiper-pagination'),
                    clickable: true,
                },
                navigation: {
                    nextEl: container.querySelector('.swiper-button-next'),
                    prevEl: container.querySelector('.swiper-button-prev'),
                },
                keyboard: { enabled: true },
            });
        });
    }
  }

  // Code project-modal.js
  function initProjectModal() {
    const mainElement = document.querySelector('main[data-projects]');
    if (!mainElement) {
        console.error('Main element with project data not found!');
        return;
    }

    let projectsData = [];
    try {
        const dataAttr = mainElement.getAttribute('data-projects');
        projectsData = dataAttr ? JSON.parse(dataAttr) : [];
    } catch (e) {
        console.error('Failed to parse project data:', e);
        return;
    }

    let modalSwiperInstance = null;

    // --- Function to open the project modal ---
    function openProjectModal(projectId) {
        const project = projectsData.find(p => p.id === projectId);
        const modal = document.getElementById('project-modal');
        const titleEl = document.getElementById('modal-project-title');
        const descriptionEl = document.getElementById('modal-project-description');
        const swiperWrapper = document.getElementById('modal-swiper-wrapper');
        
        // Nouveaux éléments
        const typeEl = document.getElementById('modal-project-type');
        const sectorEl = document.getElementById('modal-project-sector');
        const dateEl = document.getElementById('modal-project-date');
        const tagsEl = document.getElementById('modal-project-tags');
        const linkEl = document.getElementById('modal-project-link');
        const linkContainerEl = document.getElementById('modal-project-link-container');

        if (!project || !modal || !titleEl || !descriptionEl || !swiperWrapper) {
            console.error("Modal elements or project data not found for:", projectId);
            return;
        }

        // Mise à jour du titre et de la description
        titleEl.textContent = project.title;
        descriptionEl.textContent = project.detailedDescription;
        
        // Extraction du type de projet depuis le titre (ex: "StopTCA.fr - Refonte Paiement PHP")
        const titleParts = project.title.split(' - ');
        if (titleParts.length > 1 && typeEl) {
            typeEl.textContent = titleParts[1];
        } else if (typeEl) {
            typeEl.textContent = "Projet Web";
        }
        
        // Extraction du secteur et de la période depuis les détails (ex: "Secteur Médical | Juin 2022 - Mai 2023")
        if (project.details) {
            const detailParts = project.details.split(' | ');
            if (detailParts.length > 0 && sectorEl) {
                sectorEl.textContent = detailParts[0].replace('Secteur ', '');
            }
            if (detailParts.length > 1 && dateEl) {
                dateEl.textContent = detailParts[1];
            }
        }
        
        // Affichage des tags
        if (tagsEl) {
            tagsEl.innerHTML = '';
            project.tags.forEach(tag => {
                const tagEl = document.createElement('span');
                tagEl.className = `tag ${tag.toLowerCase().replace(/[^a-z0-9]/g, '')}`;
                tagEl.textContent = tag;
                tagsEl.appendChild(tagEl);
            });
        }
        
        // Gestion du lien vers le site
        if (linkContainerEl) {
            if (project.link) {
                linkContainerEl.style.display = 'block';
                if (linkEl) {
                    linkEl.href = project.link;
                    linkEl.textContent = 'Voir le site';
                }
            } else {
                linkContainerEl.style.display = 'none';
            }
        }

        // Mise à jour des images dans le swiper
        swiperWrapper.innerHTML = '';
        project.images.forEach(imgData => {
            const slide = document.createElement('div');
            slide.classList.add('swiper-slide');
            const imgSrc = typeof imgData === 'string' ? imgData : imgData?.src;
            if (imgSrc) {
                // Créer un conteneur pour centrer et dimensionner l'image correctement
                slide.innerHTML = `
                    <div style="width: 100%; height: 100%; display: flex; align-items: center; justify-content: center; padding: 10px;">
                        <img 
                            src="${imgSrc}" 
                            alt="${project.title}" 
                            class="project-image"
                            loading="lazy"
                            style="max-width: 100%; max-height: 100%; width: auto; height: auto; object-fit: contain; display: block; margin: 0 auto;"
                        >
                    </div>
                `;
            } else {
                slide.innerHTML = `<span>Image not available</span>`;
                console.warn("Image source not found for modal:", imgData);
            }
            swiperWrapper.appendChild(slide);
        });

        modal.classList.add('is-visible');

        if (modalSwiperInstance) {
            modalSwiperInstance.destroy(true, true);
            modalSwiperInstance = null;
        }

        const modalSwiperContainer = document.getElementById('modal-swiper-container');
        if (modalSwiperContainer) {
            modalSwiperInstance = new Swiper(modalSwiperContainer, {
                loop: project.images.length > 1,
                slidesPerView: 1,
                spaceBetween: 20,
                centeredSlides: true,
                watchOverflow: true,
                observer: true,
                observeParents: true,
                updateOnImagesReady: true,
                pagination: {
                    el: modal.querySelector('.modal-swiper-pagination'),
                    clickable: true,
                },
                navigation: {
                    nextEl: modal.querySelector('.modal-swiper-button-next'),
                    prevEl: modal.querySelector('.modal-swiper-button-prev'),
                },
                keyboard: {
                    enabled: true,
                },
                on: {
                    init: function() {
                        console.log('Swiper initialized successfully');
                        // Force update after a short delay to ensure images are loaded
                        setTimeout(() => {
                            this.update();
                        }, 100);
                    }
                }
            });
        }
    }
    
    // --- Function to close the project modal ---
    function closeProjectModal(event) {
        const modal = document.getElementById('project-modal');
        if (event && event.target !== modal) {
            return;
        }
        if (modal) {
            // Ajouter une classe pour l'animation de fermeture
            modal.classList.add('is-closing');
            
            // Attendre que l'animation soit terminée avant de masquer la modale
            setTimeout(() => {
                modal.classList.remove('is-visible');
                modal.classList.remove('is-closing');
                
                if (modalSwiperInstance) {
                    modalSwiperInstance.destroy(true, true);
                    modalSwiperInstance = null;
                }
            }, 300); // Correspond à la durée de transition CSS
        }
    }

    // Expose functions to global scope for onclick attributes
    window.openProjectModal = openProjectModal;
    window.closeProjectModal = closeProjectModal;

    // Add event listener for modal close button
    const closeButton = document.querySelector('.modal-close-button');
    if (closeButton) {
        closeButton.addEventListener('click', () => closeProjectModal());
    }

    // Add event listener for modal overlay click
    const overlay = document.getElementById('project-modal');
    if (overlay) {
        overlay.addEventListener('click', (e) => {
            // N'appelle closeProjectModal que si le clic est sur l'overlay lui-même
            if (e.target === overlay) {
                closeProjectModal(e);
            }
        });
    }
  }

  // Select Plan function 
  function selectPlan(planName) {
    const hiddenPlanInput = document.getElementById('selected-plan');
    if (hiddenPlanInput) hiddenPlanInput.value = planName;
    const subjectInput = document.getElementById('subject');
    if (subjectInput) subjectInput.value = `Demande de devis - Plan ${planName}`;
    const planDisplay = document.getElementById('selected-plan-display');
    if (planDisplay) planDisplay.textContent = planName;
    const optionsContainer = document.getElementById('options-checkboxes');
    if (optionsContainer) {
      optionsContainer.innerHTML = ''; 
      let options = {};
      switch (planName) { /* ... cases ... */ }
      for (const [key, label] of Object.entries(options)) {
         const checkboxDiv = document.createElement('div');
         checkboxDiv.classList.add('checkbox-option');
         const checkbox = document.createElement('input');
         checkbox.type = 'checkbox';
         checkbox.id = `option-${key}`;
         checkbox.name = `option_${key}`;
         checkbox.value = 'true';
         const labelEl = document.createElement('label');
         labelEl.htmlFor = `option-${key}`;
         labelEl.textContent = label;
         checkboxDiv.appendChild(checkbox);
         checkboxDiv.appendChild(labelEl);
         optionsContainer.appendChild(checkboxDiv);
      }
    }
    const planOptionsSection = document.getElementById('plan-options');
    if (planOptionsSection) planOptionsSection.style.display = 'block';
    const contactSection = document.getElementById('contact');
    if (contactSection) { 
        const header = document.querySelector('.site-header');
        const headerOffset = header ? header.offsetHeight : 0;
        const elementPosition = contactSection.getBoundingClientRect().top;
        const offsetPosition = elementPosition + window.pageYOffset - headerOffset - 20; 
        window.scrollTo({ top: offsetPosition, behavior: 'smooth' });
     }
    document.getElementById('name')?.focus();
  }
  window.selectPlan = selectPlan;

  // DOMContentLoaded Listener principal
  document.addEventListener('DOMContentLoaded', () => {
    // Initialisation des sections visibles
    const sections = document.querySelectorAll(
      '.services-section, .portfolio-section, .testimonials-section, .pricing-section, .contact-section'
    );
    if (sections.length > 0) {
      const observerOptions = { root: null, rootMargin: '0px', threshold: 0.1 };
      const observerCallback = (entries, observer) => {
        entries.forEach((entry) => {
          if (entry.isIntersecting) {
            entry.target.classList.add('is-visible');
            if (entry.target.id === 'projets') { 
              const projectCards = entry.target.querySelectorAll('.project-card');
              projectCards.forEach((card, index) => {
                card.style.transitionDelay = `${index * 0.1}s`; 
              });
            }
            observer.unobserve(entry.target);
          }
        });
      };
      const observer = new IntersectionObserver(observerCallback, observerOptions);
      sections.forEach(section => observer.observe(section));
    }

    // Initialiser les composants
    initLogoScroller();
    initCardSwipers();
    initProjectModal();
  });
</script>

<style>
	main {
    padding: 0;
	}

  .hero {
    min-height: 90vh;
    display: flex;
    justify-content: center;
    align-items: center;
    text-align: center;
    padding: 4rem 2rem;
    position: relative;
    overflow: hidden;
    background: radial-gradient(ellipse at bottom, #1b1f3a 0%, var(--near-black) 70%);
  }

  #particles-js {
    position: absolute;
    width: 100%;
    height: 100%;
    top: 0;
    left: 0;
    z-index: 0;
  }

  .hero-content {
    position: relative;
    z-index: 1;
    display: flex;
    flex-direction: column;
    align-items: center;
  }

	h1 {
		font-size: 4.5rem;
		font-weight: 700;
		margin-bottom: 1rem;
    color: var(--sky-blue);
	}

	.tagline {
    font-size: 1.5rem;
    color: var(--off-white);
    max-width: 60ch;
    line-height: 1.6;
    margin-bottom: 2.5rem;
  }

  .hero-cta {
    display: flex;
    gap: 1rem;
    margin-bottom: 4rem;
  }

  /* Responsive styles for hero section */
  @media (max-width: 767px) {
    .hero {
      min-height: 80vh;
      padding: 3rem 1rem;
    }
    
    h1 {
      font-size: 2.8rem;
      margin-bottom: 0.5rem;
    }
    
    .tagline {
      font-size: 1.1rem;
      margin-bottom: 2rem;
    }
    
    .hero-cta {
      flex-direction: column;
      width: 100%;
      max-width: 300px;
      gap: 0.75rem;
      margin-bottom: 3rem;
    }
    
    .hero-cta .cta-button {
      width: 100%;
    }
    
    .tech-logos {
      max-width: 100%;
    }
    
    .tech-logo {
      height: 28px;
    }
  }
  
  /* Tablet styles */
  @media (min-width: 768px) and (max-width: 1023px) {
    h1 {
      font-size: 3.5rem;
    }
    
    .tagline {
      font-size: 1.3rem;
      max-width: 50ch;
    }
  }

  .cta-button {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 0.5rem;
    background-color: var(--sky-blue);
    color: var(--near-black);
    padding: 0.8rem 1.5rem;
    border-radius: 8px;
    text-decoration: none;
    font-weight: bold;
    transition: all 0.3s ease;
    border: none;
    cursor: pointer;
    position: relative;
    overflow: hidden;
    box-shadow: 0 4px 15px rgba(135, 206, 235, 0.3);
  }

  .cta-button:hover {
    background-color: #6fbedf;
    transform: translateY(-3px);
    box-shadow: 0 7px 20px rgba(135, 206, 235, 0.4);
    text-decoration: none;
  }
  
  .cta-button:active {
    transform: translateY(1px);
    box-shadow: 0 2px 10px rgba(135, 206, 235, 0.2);
  }
  
  /* Effet d'ondulation au clic */
  .cta-button::after {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    width: 5px;
    height: 5px;
    background: rgba(255, 255, 255, 0.5);
    opacity: 0;
    border-radius: 100%;
    transform: scale(1, 1) translate(-50%, -50%);
    transform-origin: 50% 50%;
  }
  
  .cta-button:focus:not(:active)::after {
    animation: ripple 0.8s ease-out;
  }
  
  @keyframes ripple {
    0% {
      transform: scale(0, 0);
      opacity: 0.5;
    }
    20% {
      transform: scale(25, 25);
      opacity: 0.3;
    }
    100% {
      opacity: 0;
      transform: scale(40, 40);
    }
  }

  .cta-button.secondary {
    background-color: transparent;
    color: var(--sky-blue);
    border: 1px solid var(--sky-blue);
    box-shadow: 0 4px 15px rgba(135, 206, 235, 0.1);
  }

  .cta-button.secondary:hover {
    background-color: rgba(135, 206, 235, 0.1);
    color: var(--sky-blue);
    box-shadow: 0 7px 20px rgba(135, 206, 235, 0.2);
  }
  
  .cta-button.secondary:active {
    box-shadow: 0 2px 10px rgba(135, 206, 235, 0.1);
  }

  .services-section {
    padding: 4rem 2rem;
    background: linear-gradient(to bottom, #1a2a38 0%, var(--near-black) 70%);
    text-align: center;
    position: relative;
    z-index: 1;
  }

  .services-section h2 {
    font-size: 2.5rem;
    margin-bottom: 3rem;
    color: var(--sky-blue);
  }

  .services-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 2rem;
    max-width: 1200px;
    margin: 0 auto;
  }

  .service-card {
    opacity: 0;
    transform: translateX(-40px);
    transition: opacity 0.6s ease-out, transform 0.6s ease-out;
    background: linear-gradient(135deg, #1a3a4a 0%, var(--near-black) 100%);
    padding: 2rem;
    border-radius: 8px;
    border: 1px solid rgba(135, 206, 235, 0.1);
    text-align: left;
    position: relative;
    z-index: 1;
  }

  .services-section.is-visible .service-card {
    opacity: 1;
    transform: translateX(0);
  }

  .services-section.is-visible .service-card:nth-child(1) { transition-delay: 0.1s; }
  .services-section.is-visible .service-card:nth-child(2) { transition-delay: 0.2s; }
  .services-section.is-visible .service-card:nth-child(3) { transition-delay: 0.3s; }

  .service-card h3 {
    color: var(--sky-blue);
    font-size: 1.5rem;
    margin-bottom: 1rem;
  }

  .service-card p {
    color: var(--off-white);
    line-height: 1.6;
  }

  .pricing-section {
    padding: 4rem 2rem;
    background: linear-gradient(to top, #1a2a38 0%, var(--near-black) 70%);
    text-align: center;
    position: relative;
    z-index: 1;
  }

  .pricing-section h2 {
    font-size: 2.5rem;
    margin-bottom: 3rem;
    color: var(--sky-blue);
  }

  .pricing-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 2rem;
    max-width: 1200px;
    margin: 0 auto;
    align-items: stretch;
  }

  .pricing-card {
    opacity: 0;
    transform: translateY(40px);
    transition: opacity 0.6s ease-out, transform 0.6s ease-out;
    background: linear-gradient(135deg, #1a3a4a 0%, var(--near-black) 100%);
    padding: 2.5rem 2rem;
    border-radius: 8px;
    border: 1px solid rgba(135, 206, 235, 0.2);
    display: flex;
    flex-direction: column;
    position: relative;
    z-index: 1;
  }

  .pricing-card.featured {
    border-color: var(--sky-blue);
    transform: scale(1.05);
    box-shadow: 0 10px 30px rgba(135, 206, 235, 0.15);
  }

  .pricing-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 10px 20px rgba(135, 206, 235, 0.1);
  }

  .pricing-card.featured:hover {
     transform: scale(1.05) translateY(-5px);
     box-shadow: 0 15px 35px rgba(135, 206, 235, 0.2);
  }

  .pricing-card h3 {
    color: var(--sky-blue);
    font-size: 1.8rem;
    margin-bottom: 1rem;
  }

  .pricing-card .price {
    font-size: 2.5rem;
    font-weight: bold;
    color: var(--off-white);
    margin-bottom: 1.5rem;
  }

  .pricing-card .price-prefix {
    display: block;
    font-size: 0.8rem;
    font-weight: 300;
    color: var(--off-white);
    opacity: 0.8;
    margin-bottom: 0.2rem;
    text-transform: uppercase;
    letter-spacing: 0.5px;
  }

  .pricing-card ul {
    list-style: none;
    padding: 0;
    margin-bottom: 2rem;
    text-align: left;
    flex-grow: 1;
  }

  .pricing-card ul li {
    margin-bottom: 0.8rem;
    padding-left: 1.5rem;
    position: relative;
    color: var(--off-white);
  }

  .pricing-card ul li::before {
    content: '✓';
    color: var(--sky-blue);
    position: absolute;
    left: 0;
    font-weight: bold;
  }

  .pricing-section.is-visible .pricing-card {
    opacity: 1;
    transform: translateY(0);
  }

  .pricing-section.is-visible .pricing-card:nth-child(1) { transition-delay: 0.1s; }
  .pricing-section.is-visible .pricing-card:nth-child(2) { transition-delay: 0.2s; }
  .pricing-section.is-visible .pricing-card:nth-child(3) { transition-delay: 0.3s; }
  
  /* Responsive styles for pricing section */
  @media (max-width: 767px) {
    .pricing-section {
      padding: 3rem 1.5rem;
    }
    
    .pricing-section h2 {
      font-size: 2rem;
      margin-bottom: 2.5rem;
    }
    
    .pricing-grid {
      grid-template-columns: 1fr;
      max-width: 400px;
      gap: 2rem;
    }
    
    .pricing-card {
      padding: 2rem 1.5rem;
    }
    
    .pricing-card.featured {
      transform: scale(1);
      order: -1; /* Move featured card to the top on mobile */
    }
    
    .pricing-card:hover,
    .pricing-card.featured:hover {
      transform: translateY(-5px);
    }
    
    .pricing-section.is-visible .pricing-card.featured {
      transform: translateY(0);
      border-width: 2px;
    }
    
    .pricing-card h3 {
      font-size: 1.6rem;
    }
    
    .pricing-card .price {
      font-size: 2.2rem;
      margin-bottom: 1.2rem;
    }
    
    .pricing-card ul {
      margin-bottom: 1.5rem;
    }
    
    .pricing-card ul li {
      margin-bottom: 0.6rem;
      font-size: 0.95rem;
    }
  }
  
  @media (min-width: 768px) and (max-width: 1023px) {
    .pricing-section {
      padding: 3.5rem 2rem;
    }
    
    .pricing-grid {
      grid-template-columns: repeat(3, 1fr);
      gap: 1.5rem;
    }
    
    .pricing-card {
      padding: 2rem 1.5rem;
    }
    
    .pricing-card h3 {
      font-size: 1.6rem;
    }
    
    .pricing-card .price {
      font-size: 2.2rem;
    }
    
    .pricing-card.featured {
      transform: scale(1.03);
    }
    
    .pricing-card.featured:hover {
      transform: scale(1.03) translateY(-5px);
    }
    
    .pricing-section.is-visible .pricing-card.featured {
      transform: scale(1.03);
    }
  }

  .portfolio-section {
    padding: 4rem 2rem;
    background-color: var(--near-black);
    text-align: center;
    position: relative;
    z-index: 1;
  }

  .portfolio-section h2 {
    font-size: 2.5rem;
    margin-bottom: 3rem;
    color: var(--sky-blue);
    position: relative;
    display: inline-block;
  }
  
  .portfolio-section h2::after {
    content: '';
    position: absolute;
    bottom: -10px;
    left: 50%;
    transform: translateX(-50%);
    width: 60px;
    height: 3px;
    background-color: var(--sky-blue);
    border-radius: 3px;
  }

  .portfolio-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
    gap: 3rem;
    max-width: 1200px;
    margin: 0 auto;
  }
  
  /* Enhanced responsive styles for portfolio grid */
  @media (max-width: 767px) {
    .portfolio-section {
      padding: 3rem 1.5rem;
    }
    
    .portfolio-section h2 {
      font-size: 2rem;
      margin-bottom: 2.5rem;
    }
    
    .portfolio-section h2::after {
      width: 40px;
      height: 2px;
      bottom: -8px;
    }
    
    .portfolio-grid {
      grid-template-columns: 1fr;
      max-width: 450px;
      gap: 2rem;
    }
    
    .swiper {
      height: 180px;
    }
    
    .project-content {
      padding: 1.2rem;
      min-height: 180px;
    }
    
    .project-content h3 {
      font-size: 1.3rem;
      margin-bottom: 0.5rem;
    }
    
    .project-description {
      font-size: 0.9rem;
      margin-bottom: 1rem;
      -webkit-line-clamp: 2;
    }
    
    .project-tags {
      margin-bottom: 0.75rem;
    }
    
    .tag {
      padding: 0.25rem 0.6rem;
      font-size: 0.7rem;
    }
    
    .project-link {
      padding: 0.5rem 1rem;
      font-size: 0.85rem;
    }
  }
  
  @media (min-width: 768px) and (max-width: 991px) {
    .portfolio-section {
      padding: 3.5rem 2rem;
    }
    
    .portfolio-grid {
      grid-template-columns: repeat(2, 1fr);
      gap: 2.5rem;
    }
    
    .portfolio-section h2 {
      font-size: 2.2rem;
    }
    
    .swiper {
      height: 200px;
    }
  }
  
  @media (min-width: 1400px) {
    .portfolio-grid {
      grid-template-columns: repeat(3, 1fr);
      max-width: 1400px;
    }
  }

  .project-card {
    opacity: 0;
    transform: translateY(50px) scale(0.95);
    transition: opacity 0.6s ease-out, transform 0.6s ease-out;
    background: linear-gradient(145deg, rgba(255, 255, 255, 0.07) 0%, rgba(255, 255, 255, 0.01) 100%);
    border-radius: 12px;
    overflow: hidden;
    border: 1px solid rgba(135, 206, 235, 0.2);
    display: flex;
    flex-direction: column;
    backdrop-filter: blur(8px); 
    -webkit-backdrop-filter: blur(8px); 
    box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
    cursor: pointer;
    height: 100%;
  }

  .portfolio-section.is-visible .project-card {
    opacity: 1;
    transform: translateY(0) scale(1);
  }

  .project-card:hover {
    transform: translateY(-8px) scale(1.02);
    box-shadow: 0 12px 25px rgba(135, 206, 235, 0.15);
    border-color: rgba(135, 206, 235, 0.3);
  }

  .swiper {
    width: 100%;
    height: 220px;
    border-radius: 12px 12px 0 0;
    border-bottom: 1px solid rgba(135, 206, 235, 0.15);
    background-color: transparent;
    overflow: hidden;
  }

  .swiper-slide img, 
  .swiper-slide .project-image,
  img.project-image {
    display: block;
    width: 100% !important;
    height: 100% !important;
    object-fit: cover !important;
    margin: 0;
    overflow: visible;
  }
  
  .modal-swiper img,
  .modal-swiper .project-image {
    display: block;
    width: 100% !important;
    height: 100% !important;
    object-fit: cover !important;
    margin: 0;
  }

  .swiper-pagination-bullet {
    background: rgba(255, 255, 255, 0.5);
    opacity: 1;
  }

  .swiper-pagination-bullet-active {
    background: var(--sky-blue);
  }

  .swiper-button-next, 
  .swiper-button-prev {
    color: var(--sky-blue);
    background-color: rgba(0, 0, 0, 0.4);
    width: 35px;
    height: 35px;
    border-radius: 50%;
    transition: background-color 0.3s ease, transform 0.2s ease;
  }
  .swiper-button-next:hover, 
  .swiper-button-prev:hover {
      background-color: rgba(0, 0, 0, 0.6);
      transform: scale(1.1);
  }

  .swiper-button-next::after, 
  .swiper-button-prev::after {
      font-size: 16px;
      font-weight: bold;
  }

  .project-content {
    padding: 1.5rem;
    display: flex;
    flex-direction: column;
    flex-grow: 1;
    position: relative;
    height: auto;
    min-height: 200px;
  }

  .project-content h3 {
    color: var(--sky-blue);
    font-size: 1.5rem;
    margin: 0 0 0.75rem 0;
    /* Ajouter une animation de soulignement hover */
    position: relative;
    display: inline-block;
    padding-bottom: 4px;
    line-height: 1.3;
  }

  .project-description {
    color: var(--off-white);
    line-height: 1.6;
    margin-bottom: 1.5rem;
    font-size: 0.95rem;
    flex-grow: 1;
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
    text-overflow: ellipsis;
  }

  .project-tags {
    margin-bottom: 1rem;
    display: flex;
    flex-wrap: wrap;
    gap: 0.5rem;
  }

  .tag {
    display: inline-block;
    padding: 0.3rem 0.8rem;
    border-radius: 15px;
    font-size: 0.75rem;
    font-weight: 600;
    line-height: 1;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    background-color: var(--tag-default-bg);
    color: var(--tag-default-text);
    white-space: nowrap;
    transition: transform 0.2s ease, opacity 0.2s ease;
  }
  
  .project-card:hover .tag {
    opacity: 0.9;
  }
  
  .project-card:hover .tag:hover {
    transform: translateY(-2px) scale(1.05);
    opacity: 1;
  }

  .tag.php { background-color: var(--tag-php); }
  .tag.laravel { background-color: var(--tag-laravel); }
  .tag.symfony { background-color: var(--tag-symfony); color: var(--tag-symfony-text); }
  .tag.mangopay { background-color: var(--tag-mangopay); }
  .tag.javascript { background-color: var(--tag-javascript); color: var(--tag-javascript-text); }
  .tag.css { background-color: var(--tag-css); }
  .tag.html { background-color: var(--tag-html); }
  .tag.wordpress { background-color: var(--tag-wordpress); }
  .tag.woocommerce { background-color: var(--tag-woocommerce); }
  .tag.seo { background-color: var(--tag-seo); }
  .tag.apirest { background-color: var(--tag-apirest); }
  .tag.bootstrap { background-color: var(--tag-bootstrap); }
  
  .project-details {
    font-size: 0.85rem;
    color: var(--off-white);
    opacity: 0.7;
    margin-top: auto;
    margin-bottom: 1rem;
    display: flex;
    gap: 0.5rem;
    align-items: center;
  }
  
  .project-details::before {
    content: '';
    display: inline-block;
    width: 12px;
    height: 12px;
    background-color: var(--sky-blue);
    opacity: 0.5;
    border-radius: 50%;
  }

  .project-link {
      margin-top: auto;
      align-self: flex-start;
      padding: 0.6rem 1.2rem;
      font-size: 0.9rem;
  }

  .testimonials-section {
    padding: 5rem 0;
    position: relative;
    overflow: visible;
    text-align: center;
    box-sizing: border-box;
  }

  .testimonials-grid {
    display: flex;
    gap: 2rem;
    padding: 1rem 1rem 2rem 1rem;
    overflow-x: auto;
    overflow-y: hidden;
    -webkit-overflow-scrolling: touch;
    scroll-snap-type: x mandatory;
    scroll-padding: 1.5rem;
    justify-content: center;
    margin: 0 auto;
    max-width: 100%;
    box-sizing: border-box;
  }

  .testimonial-card {
    background: linear-gradient(135deg, rgba(30, 50, 70, 0.8) 0%, rgba(20, 30, 40, 0.9) 100%);
    border-radius: 12px;
    padding: 2rem;
    display: flex;
    flex-direction: column;
    box-shadow: 0px 8px 30px rgba(0, 0, 0, 0.3), 0px 1px 3px rgba(0, 0, 0, 0.1);
    transition: all 0.3s ease;
    border: 1px solid rgba(135, 206, 235, 0.1);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    max-width: 350px; /* Légèrement réduit pour éviter le débordement */
    width: 350px;
    height: 260px;
    flex-shrink: 0;
    position: relative;
    z-index: 1;
    overflow: hidden;
    scroll-snap-align: center;
    box-sizing: border-box;
  }

  .testimonial-card .quote {
    color: var(--off-white);
    font-size: 1rem; /* Légèrement plus petit pour plus de contenu */
    line-height: 1.6;
    margin-bottom: 1.25rem;
    font-style: italic;
    flex-grow: 1;
    overflow-y: auto; /* Permet le défilement si le contenu est trop long */
    scrollbar-width: thin; /* Pour Firefox */
    scrollbar-color: rgba(135, 206, 235, 0.3) transparent; /* Pour Firefox */
  }
  
  /* Style de scrollbar pour Chrome/Safari/Edge */
  .testimonial-card .quote::-webkit-scrollbar {
    width: 4px;
  }
  
  .testimonial-card .quote::-webkit-scrollbar-track {
    background: transparent;
  }
  
  .testimonial-card .quote::-webkit-scrollbar-thumb {
    background-color: rgba(135, 206, 235, 0.3);
    border-radius: 4px;
  }

  .testimonial-card .author {
    display: flex;
    margin-top: auto;
    justify-content: center;
    text-align: center;
  }

  .testimonial-card .author div {
    text-align: center;
  }

  /* Système d'étoiles */
  .testimonial-card .rating {
    margin-bottom: 1rem;
    display: flex;
    gap: 0.25rem;
    justify-content: center;
  }

  .testimonial-card .star {
    color: #FFD700; /* Couleur dorée pour les étoiles */
    font-size: 1.25rem;
  }

  .testimonial-card .name {
    color: var(--sky-blue);
    font-weight: 600;
    margin: 0 0 0.2rem 0;
    text-align: center;
  }

  .testimonial-card .title {
    color: var(--off-white);
    font-size: 0.9rem;
    opacity: 0.8;
    margin: 0;
    text-align: center;
  }
  
  .testimonial-card .date {
    color: var(--off-white);
    font-size: 0.8rem;
    opacity: 0.6;
    margin: 0.2rem 0 0 0;
  }

  .testimonials-section.is-visible .testimonial-card {
    opacity: 1;
  }

  @keyframes scrollHorizontal {
    0% {
      transform: translateX(0%);
    }
    100% {
      transform: translateX(-50%);
    }
  }

  .testimonials-grid:hover {
    animation-play-state: paused;
  }
  
  /* Responsive styles for testimonials section */
  @media (max-width: 767px) {
    .testimonials-section {
      padding: 3rem 0 3rem 0;
    }
    
    .testimonials-section h2 {
      font-size: 2rem;
      margin-bottom: 2rem;
      padding: 0 1.5rem;
    }
    
    .testimonials-grid {
      gap: 1.5rem;
      padding: 0.5rem 1.5rem 1.5rem 1.5rem;
    }
    
    .testimonial-card {
      padding: 1.5rem;
      min-width: 300px;
      max-width: 90vw;
      width: auto;
      height: auto;
    }
    
    .testimonial-card .quote {
      font-size: 0.95rem;
      line-height: 1.6;
      margin-bottom: 1rem;
    }
    
    .testimonial-card .name {
      font-size: 0.95rem;
    }
    
    .testimonial-card .title {
      font-size: 0.8rem;
    }

    .testimonial-card .rating {
      margin-bottom: 0.75rem;
    }

    .testimonial-card .star {
      font-size: 1.1rem;
    }
  }
  
  @media (min-width: 768px) and (max-width: 1023px) {
    .testimonials-section h2 {
      font-size: 2.2rem;
    }
    
    .testimonial-card {
      min-width: 320px;
      max-width: 320px;
      width: 320px;
      height: 230px;
      padding: 1.8rem;
    }
    
    .testimonial-card .quote {
      font-size: 1rem;
    }
  }

  .tech-logos {
    width: 100%;
    max-width: 800px;
    margin: 0 auto;
    text-align: center;
    position: relative;
    z-index: 1;
  }

  .tech-logos-title {
    color: var(--off-white);
    opacity: 0.7;
    font-size: 0.9rem;
    margin-bottom: 1.5rem;
    text-transform: uppercase;
    letter-spacing: 1px;
  }

  .logo-scroll-wrapper {
    overflow: hidden;
  }

  @keyframes scrollLogos {
    0% { transform: translateX(0%); }
    100% { transform: translateX(-50%); }
  }

  .logo-list {
    display: flex;
    align-items: center;
    gap: 3rem;
    padding: 0.5rem 0;
    width: fit-content;
    will-change: transform;
  }

  .tech-logo {
    height: 40px;
    width: auto;
    opacity: 0.7;
    transition: opacity 0.3s ease;
    flex-shrink: 0;
  }

  .tech-logos:hover .tech-logo {
      opacity: 0.9;
  }

  /* --- Shared Section Styles --- */
  section {
    padding: 5rem 2rem;
    position: relative;
    z-index: 1;
    /* overflow: hidden; /* Removed for now - potentially caused form issues */
  }
  section h2 {
    font-size: 2.8rem;
    margin-bottom: 3.5rem;
    color: var(--sky-blue);
    text-align: center;
  }

  /* --- Contact Section --- */
  .contact-section {
    padding: 5rem 2rem; /* Match other sections */
    background: linear-gradient(to bottom, #1a2a38 0%, var(--near-black) 70%);
    text-align: center;
  }

  /* Re-add h2 styling if needed, inherits from general section h2 now */
  /* .contact-section h2 { ... } */

  .contact-section p {
    color: var(--off-white);
    max-width: 60ch;
    margin: 0 auto 3rem auto;
    line-height: 1.6;
  }

  .contact-form {
    opacity: 0;
    transform: translateY(40px);
    transition: opacity 0.8s ease-out, transform 0.8s ease-out 0.2s;
    max-width: 700px; /* Ensure max-width */
    margin: 0 auto; /* Center the form */
    text-align: left; /* Align labels/inputs left within the centered form */
  }

  .form-group {
    margin-bottom: 1.5rem;
  }

  .form-group label {
    display: block;
    margin-bottom: 0.5rem;
    color: var(--off-white);
    font-weight: bold;
  }

  .form-group input,
  .form-group textarea {
    width: 100%;
    padding: 0.8rem 1rem;
    border-radius: 5px;
    border: 1px solid rgba(135, 206, 235, 0.3);
    background-color: rgba(30, 30, 30, 0.9); /* Darker background */
    color: var(--off-white);
    font-family: inherit;
    font-size: 1rem;
    transition: border-color 0.3s ease, box-shadow 0.3s ease;
  }

  .form-group input:focus,
  .form-group textarea:focus {
    outline: none;
    border-color: var(--sky-blue);
    box-shadow: 0 0 8px rgba(135, 206, 235, 0.5);
  }

  .contact-section .cta-button {
      display: block;
      width: 100%;
      font-size: 1.1rem;
      margin-top: 1rem;
      text-align: center; /* Center text within button */
  }

  .contact-section.is-visible .contact-form {
    opacity: 1;
    transform: translateY(0);
  }

  /* --- Tech Logos --- */
  /* ... existing tech logos styles ... */

  /* --- Shared Section Styles --- */
  /* ... existing shared section styles ... */

  /* --- Contact Form Enhancements --- */
  .plan-options-section {
    background-color: rgba(30, 60, 80, 0.2); /* Slightly different background */
    border: 1px solid rgba(135, 206, 235, 0.2);
    border-radius: 8px;
    padding: 1.5rem 2rem; /* More padding */
    margin-bottom: 2rem;
    transition: background-color 0.3s ease;
  }

  .plan-options-section h4 {
    margin-top: 0;
    margin-bottom: 0.75rem; /* More space below title */
    color: var(--sky-blue);
    font-size: 1.3rem; /* Slightly larger */
    font-weight: 600;
  }
  .plan-options-section h4 #selected-plan-display {
    /* Keep bold */
  }

  .plan-options-section p {
      margin-bottom: 1.2rem; /* More space below paragraph */
      color: var(--off-white);
      font-size: 0.9rem;
      opacity: 0.9;
  }

  .options-checkboxes {
      display: flex;
      flex-direction: column;
      gap: 0.5rem; /* Slightly less gap */
  }

  .checkbox-option {
      display: flex;
      align-items: center;
      gap: 0.8rem;
      padding: 0.6rem 0.8rem; /* Add padding to the row */
      border-radius: 5px;
      transition: background-color 0.2s ease;
      cursor: pointer; /* Make whole row clickable */
  }

  .checkbox-option:hover {
      background-color: rgba(135, 206, 235, 0.08); /* Hover background */
  }

  /* Hide default checkbox */
  .checkbox-option input[type="checkbox"] {
      appearance: none;
      -webkit-appearance: none;
      position: absolute; /* Remove from layout flow */
      opacity: 0;
      pointer-events: none;
  }

  .checkbox-option label {
      margin-bottom: 0; 
      font-weight: normal; 
      color: var(--off-white);
      cursor: pointer;
      flex-grow: 1;
      position: relative; /* Needed for pseudo-element positioning */
      padding-left: 2em; /* Space for custom checkbox */
      line-height: 1.4; /* Ensure proper vertical alignment */
  }

  /* Custom checkbox style (the box) */
  .checkbox-option label::before {
      content: '';
      position: absolute;
      left: 0;
      top: 50%;
      transform: translateY(-50%);
      width: 1.2em;
      height: 1.2em;
      border: 2px solid rgba(135, 206, 235, 0.5);
      border-radius: 3px;
      background-color: rgba(255, 255, 255, 0.05);
      transition: background-color 0.2s ease, border-color 0.2s ease;
  }

  /* Custom checkbox style (the checkmark) - shown when checked */
  .checkbox-option input[type="checkbox"]:checked + label::after {
      content: '';
      position: absolute;
      left: 0.4em;
      top: 50%;
      width: 0.4em;
      height: 0.8em;
      border: solid var(--sky-blue);
      border-width: 0 3px 3px 0;
      transform: translateY(-60%) rotate(45deg); /* Adjust position */
  }

  /* Style changes on check */
  .checkbox-option input[type="checkbox"]:checked + label::before {
      background-color: rgba(135, 206, 235, 0.2);
      border-color: var(--sky-blue);
  }

  /* Focus style for accessibility */
  .checkbox-option input[type="checkbox"]:focus + label::before {
      outline: 2px solid var(--sky-blue);
      outline-offset: 2px;
  }

  .options-divider {
    border: none;
    height: 1px;
    background-color: rgba(135, 206, 235, 0.2);
    margin-top: 1.5rem;
    margin-bottom: 1.5rem; 
  }

  /* === Project Modal Styles === */
  .modal-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.8);
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 1000;
    opacity: 0;
    visibility: hidden;
    transition: opacity 0.3s ease, visibility 0s linear 0.3s;
    backdrop-filter: blur(5px);
    -webkit-backdrop-filter: blur(5px);
  }

  .modal-overlay.is-visible {
    opacity: 1;
    visibility: visible;
    transition: opacity 0.3s ease;
  }

  .modal-content {
    background: linear-gradient(145deg, #1e2a3a 0%, #111827 100%);
    padding: 2rem 2.5rem;
    border-radius: 10px;
    max-width: 900px;
    width: 90%;
    max-height: 90vh;
    overflow-y: auto;
    position: relative;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
    border: 1px solid rgba(135, 206, 235, 0.2);
    transform: scale(0.95) translateY(30px);
    transition: transform 0.4s cubic-bezier(0.19, 1, 0.22, 1);
    opacity: 0;
  }
  
  .modal-overlay.is-visible .modal-content {
    transform: scale(1) translateY(0);
    opacity: 1;
    transition: transform 0.4s cubic-bezier(0.19, 1, 0.22, 1), opacity 0.3s ease;
  }
  
  /* Animation de fermeture de la modale */
  .modal-overlay.is-closing .modal-content {
    transform: scale(0.95) translateY(30px);
    opacity: 0;
  }
  
  /* Enhanced modal responsive styles */
  @media (max-width: 767px) {
    .modal-content {
      padding: 1.25rem 1rem 1.5rem;
      width: 95%;
      max-height: 95vh;
    }
    
    .modal-close-button {
      top: 0.75rem;
      right: 1rem;
      font-size: 2rem;
    }
    
    .modal-content h3 {
      font-size: 1.5rem;
      margin-bottom: 1rem;
      padding-right: 30px; /* Space for close button */
    }
    
    .modal-swiper {
      height: 220px;
      margin-bottom: 1.5rem;
    }
    
    .modal-project-info {
      display: flex;
      flex-direction: column;
      gap: 1.5rem;
    }
    
    .modal-project-meta {
      order: 3;
      padding: 1rem;
    }
    
    .modal-project-details {
      order: 1;
    }
    
    .modal-project-technologies {
      order: 2;
    }
    
    .modal-project-link {
      order: 4;
      margin-top: 0.5rem;
    }
    
    .modal-project-details h4,
    .modal-project-technologies h4 {
      font-size: 1.1rem;
      margin-bottom: 0.75rem;
    }
    
    .modal-project-details p {
      font-size: 0.95rem;
      line-height: 1.6;
    }
    
    .info-label {
      font-size: 0.75rem;
    }
    
    .info-value {
      font-size: 0.9rem;
    }
    
    .modal-tags .tag {
      font-size: 0.7rem;
      padding: 0.3rem 0.7rem;
    }
  }
  
  @media (min-width: 768px) and (max-width: 1023px) {
    .modal-content {
      padding: 2rem;
      max-width: 700px;
    }
    
    .modal-swiper {
      height: 350px;
    }
    
    .modal-content h3 {
      font-size: 1.8rem;
    }
    
    .modal-project-details p {
      font-size: 0.95rem;
    }
  }

  .modal-close-button {
    position: absolute;
    top: 1rem;
    right: 1.5rem;
    background: none;
    border: none;
    font-size: 2.5rem;
    color: rgba(255, 255, 255, 0.6);
    cursor: pointer;
    padding: 0;
    line-height: 1;
    transition: color 0.2s ease;
    z-index: 10;
  }
  .modal-close-button:hover {
      color: var(--sky-blue);
  }

  .modal-content h3 {
    color: var(--sky-blue);
    font-size: 2rem;
    margin-top: 0;
    margin-bottom: 1.5rem;
  }

  /* Modal Swiper Styles */
  .modal-swiper {
    width: 100%;
    height: 450px;
    margin-bottom: 2rem;
    border-radius: 8px;
    overflow: hidden;
    border: 1px solid rgba(135, 206, 235, 0.15);
    box-shadow: 0 4px 16px rgba(0, 0, 0, 0.3);
    position: relative;
    background-color: transparent;
  }
  
  .modal-swiper .swiper-slide {
    background-color: transparent;
    display: flex;
    align-items: center;
    justify-content: center;
    height: 100%;
  }
  
  .modal-swiper .project-image {
    width: 100% !important;
    height: 100% !important;
    object-fit: cover !important;
    display: block;
    margin: 0;
  }
  
  .modal-swiper-pagination .swiper-pagination-bullet-active {
      background-color: var(--sky-blue);
  }
  
  .modal-swiper-button-prev, .modal-swiper-button-next {
      color: var(--sky-blue);
      background-color: rgba(0, 0, 0, 0.5);
      width: 40px;
      height: 40px;
      border-radius: 50%;
      transition: all 0.2s ease;
  }
  
  .modal-swiper-button-prev:hover, .modal-swiper-button-next:hover {
      background-color: rgba(0, 0, 0, 0.8);
      transform: scale(1.1);
  }
  
  .modal-swiper-button-prev::after, .modal-swiper-button-next::after {
      font-size: 1rem;
  }
  
  @media (max-width: 767px) {
    .modal-swiper {
      height: 300px;
    }
  }

  .modal-project-info {
    display: grid;
    grid-template-columns: 1fr;
    gap: 2rem;
  }

  @media (min-width: 768px) {
    .modal-project-info {
      grid-template-columns: 3fr 1fr;
      gap: 3rem;
    }
    
    .modal-project-meta {
      grid-column: 2;
      grid-row: 1 / 3;
    }
    
    .modal-project-details {
      grid-column: 1;
      grid-row: 1;
    }
    
    .modal-project-technologies {
      grid-column: 1;
      grid-row: 2;
    }
    
    .modal-project-link {
      grid-column: 1 / 3;
      grid-row: 3;
    }
  }

  .modal-project-meta {
    display: flex;
    flex-direction: column;
    gap: 1rem;
    background-color: rgba(135, 206, 235, 0.07);
    padding: 1.25rem;
    border-radius: 8px;
    border: 1px solid rgba(135, 206, 235, 0.15);
  }

  .modal-project-type,
  .modal-project-sector,
  .modal-project-date {
    display: flex;
    flex-direction: column;
    gap: 0.25rem;
  }

  .info-label {
    font-size: 0.8rem;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    color: var(--sky-blue);
    opacity: 0.8;
  }

  .info-value {
    font-size: 1rem;
    color: white;
    font-weight: 500;
  }

  .modal-project-details h4,
  .modal-project-technologies h4 {
    color: var(--sky-blue);
    font-size: 1.25rem;
    margin-top: 0;
    margin-bottom: 1rem;
    font-weight: 600;
  }

  .modal-project-details p {
    color: var(--off-white);
    line-height: 1.7;
    font-size: 1rem;
    margin: 0;
  }

  .modal-project-link {
    margin-top: 1rem;
    text-align: center;
  }

  .modal-project-link .cta-button {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 0.5rem;
    padding: 0.75rem 1.5rem;
    font-size: 1rem;
    min-width: 160px;
  }

  .modal-tags {
    display: flex;
    flex-wrap: wrap;
    gap: 0.75rem;
  }

  .modal-tags .tag {
    font-size: 0.8rem;
    padding: 0.4rem 0.9rem;
  }

  /* Sélecteur spécifique pour les images de projet */
  img[class="project-image"],
  img.project-image {
    display: block !important;
    max-width: 100% !important;
    width: 100% !important;
    height: auto !important;
    object-fit: contain !important;
    object-position: center !important;
  }

  /* Style global pour les conteneurs d'images dans Swiper */
  .swiper, 
  .modal-swiper,
  .swiper-slide {
    overflow: hidden;
    background-color: transparent;
  }

  /* Style pour les diapositives Swiper */
  .swiper-slide img, 
  .swiper-slide .project-image {
    display: block;
    width: 100%;
    height: 100%;
    object-fit: cover !important;
    margin: 0;
  }

  /* Responsive styles for services section */
  @media (max-width: 767px) {
    .services-section {
      padding: 3rem 1.5rem;
    }
    
    .services-section h2 {
      font-size: 2rem;
      margin-bottom: 2rem;
    }
    
    .services-grid {
      grid-template-columns: 1fr;
      gap: 1.5rem;
    }
    
    .service-card {
      padding: 1.5rem;
    }
    
    .service-card h3 {
      font-size: 1.3rem;
    }
  }
  
  @media (min-width: 768px) and (max-width: 1023px) {
    .services-section {
      padding: 3.5rem 2rem;
    }
    
    .services-grid {
      grid-template-columns: repeat(2, 1fr);
    }
    
    .services-section h2 {
      font-size: 2.2rem;
    }
  }

  /* --- Contact Section --- */
  .contact-section {
    padding: 5rem 2rem; /* Match other sections */
    background: linear-gradient(to bottom, #1a2a38 0%, var(--near-black) 70%);
    text-align: center;
  }

  /* Re-add h2 styling if needed, inherits from general section h2 now */
  /* .contact-section h2 { ... } */

  .contact-section p {
    color: var(--off-white);
    max-width: 60ch;
    margin: 0 auto 3rem auto;
    line-height: 1.6;
  }

  .contact-form {
    opacity: 0;
    transform: translateY(40px);
    transition: opacity 0.8s ease-out, transform 0.8s ease-out 0.2s;
    max-width: 700px; /* Ensure max-width */
    margin: 0 auto; /* Center the form */
    text-align: left; /* Align labels/inputs left within the centered form */
  }

  .form-group {
    margin-bottom: 1.5rem;
  }

  .form-group label {
    display: block;
    margin-bottom: 0.5rem;
    color: var(--off-white);
    font-weight: bold;
  }

  .form-group input,
  .form-group textarea {
    width: 100%;
    padding: 0.8rem 1rem;
    border-radius: 5px;
    border: 1px solid rgba(135, 206, 235, 0.3);
    background-color: rgba(30, 30, 30, 0.9); /* Darker background */
    color: var(--off-white);
    font-family: inherit;
    font-size: 1rem;
    transition: border-color 0.3s ease, box-shadow 0.3s ease;
  }

  .form-group input:focus,
  .form-group textarea:focus {
    outline: none;
    border-color: var(--sky-blue);
    box-shadow: 0 0 8px rgba(135, 206, 235, 0.5);
  }

  .contact-section .cta-button {
      display: block;
      width: 100%;
      font-size: 1.1rem;
      margin-top: 1rem;
      text-align: center; /* Center text within button */
  }

  .contact-section.is-visible .contact-form {
    opacity: 1;
    transform: translateY(0);
  }
  
  /* Responsive styles for contact section */
  @media (max-width: 767px) {
    .contact-section {
      padding: 3rem 1.5rem;
    }
    
    .contact-section h2 {
      font-size: 2rem;
      margin-bottom: 1.5rem;
    }
    
    .contact-section p {
      font-size: 0.95rem;
      margin-bottom: 2rem;
    }
    
    .form-group {
      margin-bottom: 1.2rem;
    }
    
    .form-group label {
      font-size: 0.95rem;
      margin-bottom: 0.3rem;
    }
    
    .form-group input,
    .form-group textarea {
      padding: 0.7rem 0.9rem;
      font-size: 0.95rem;
    }
    
    .contact-section .cta-button {
      font-size: 1rem;
      padding: 0.8rem 1.5rem;
    }
    
    .plan-options-section {
      padding: 1.2rem 1.5rem;
    }
    
    .plan-options-section h4 {
      font-size: 1.2rem;
    }
  }
  
  @media (min-width: 768px) and (max-width: 1023px) {
    .contact-section {
      padding: 4rem 2rem;
    }
    
    .contact-section h2 {
      font-size: 2.2rem;
    }
    
    .contact-form {
      max-width: 600px;
    }
  }

  /* Style pour l'élément .quote */
  .testimonial-card .quote {
    color: var(--off-white);
    font-size: 1rem;
    line-height: 1.6;
    margin-bottom: 1.25rem;
    font-style: italic;
    flex-grow: 1;
    overflow-y: auto;
    scrollbar-width: thin;
    scrollbar-color: rgba(135, 206, 235, 0.3) transparent;
    text-align: center;
  }

  </style>

</rewritten_file>